{"version":3,"file":"js/bundle.148be80c0d2779983233.js","mappings":"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","sources":["webpack://list-app/./src/services/blogs/components/GoodList.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\n\nconst GoodList = () => {\n  const [goods, setGoods] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [hasMore, setHasMore] = useState(true);\n\n  useEffect(() => {\n    const fetchGoods = async () => {\n      try {\n        const response = await axios.get('/api/goods', {\n          params: { page: currentPage, limit: 12 }\n        });\n        setGoods(prevGoods => [...prevGoods, ...response.data]);\n        if (response.data.length < 12) {\n          setHasMore(false);\n        }\n        setLoading(false);\n      } catch (error) {\n        console.error('Error fetching goods:', error);\n        setError('Failed to fetch goods');\n        setLoading(false);\n      }\n    };\n\n    fetchGoods();\n  }, [currentPage]);\n\n  const handleScroll = () => {\n    if (window.innerHeight + document.documentElement.scrollTop >= document.documentElement.offsetHeight - 50) {\n      if (hasMore && !loading) {\n        setCurrentPage(prevPage => prevPage + 1);\n      }\n    }\n  };\n\n  useEffect(() => {\n    window.addEventListener('scroll', handleScroll);\n    return () => window.removeEventListener('scroll', handleScroll);\n  }, [loading, hasMore]);\n\n  if (loading && currentPage === 1) {\n    return <p>Loading...</p>;\n  }\n\n  if (error) {\n    return <p>{error}</p>;\n  }\n\n  const latestMonth = goods.length > 0 ? new Date(goods[0].created_at).getMonth() : null;\n  const latestYear = goods.length > 0 ? new Date(goods[0].created_at).getFullYear() : null;\n\n  return (\n    <div className='ipod-container'>\n      <div className=\"ipod-header\">\n        <div className=\"everyday-title\">\n          <h1>Goods</h1>\n        </div>\n      </div>\n      <div className=\"ipod-items\">\n        {goods.map(good => (\n          // いつかGoodItem作る。その時はこれに変える。今は直接GoodItemに飛ぶよう作ってる。\n          // <a key={good.id} href={`/goods/${good.id}`} className=\"ipod-item-link\"> \n          <a key={good.id} href={good.item_link} className=\"ipod-item-link\">\n            <div className=\"ipod-item\">\n              <div className='goodImagin'>\n                <img src={good.image_url} alt={good.message} className=\"ipod-item-image\" />\n              </div>\n              <div className=\"ipod-item-content\">\n                <h3>{good.title}</h3>\n                {new Date(good.created_at).getMonth() === latestMonth && new Date(good.created_at).getFullYear() === latestYear && (\n                  <span className=\"ipod-new-tag\">New</span>\n                )}\n              </div>\n            </div>\n          </a>\n        ))}\n      </div>\n      {loading && <p>Loading more...</p>}\n    </div>\n  );\n};\n\nexport default GoodList;\n"],"names":["_useState","useState","_useState2","_slicedToArray","goods","setGoods","_useState3","_useState4","loading","setLoading","_useState5","_useState6","error","setError","_useState7","_useState8","currentPage","setCurrentPage","_useState9","_useState10","hasMore","setHasMore","useEffect","fetchGoods","_ref","_asyncToGenerator","_regeneratorRuntime","_callee","response","_context","prev","next","axios","get","params","page","limit","sent","prevGoods","concat","_toConsumableArray","data","length","t0","stop","apply","arguments","handleScroll","window","innerHeight","document","documentElement","scrollTop","offsetHeight","prevPage","addEventListener","removeEventListener","React","latestMonth","Date","created_at","getMonth","latestYear","getFullYear","className","map","good","key","id","href","item_link","src","image_url","alt","message","title"],"sourceRoot":""}