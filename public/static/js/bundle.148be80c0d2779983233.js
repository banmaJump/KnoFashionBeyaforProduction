"use strict";(self.webpackChunklist_app=self.webpackChunklist_app||[]).push([[656],{656:(e,t,n)=>{n.r(t),n.d(t,{default:()=>u});var a=n(458),r=n(467),l=n(296),c=n(756),i=n.n(c),s=n(540),o=n(83);const u=function(){var e=(0,s.useState)([]),t=(0,l.A)(e,2),n=t[0],c=t[1],u=(0,s.useState)(!0),m=(0,l.A)(u,2),d=m[0],p=m[1],f=(0,s.useState)(null),g=(0,l.A)(f,2),v=g[0],E=g[1],h=(0,s.useState)(1),w=(0,l.A)(h,2),N=w[0],k=w[1],A=(0,s.useState)(!0),_=(0,l.A)(A,2),S=_[0],y=_[1];(0,s.useEffect)((function(){var e=function(){var e=(0,r.A)(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.A.get("/api/goods",{params:{page:N,limit:12}});case 3:t=e.sent,c((function(e){return[].concat((0,a.A)(e),(0,a.A)(t.data))})),t.data.length<12&&y(!1),p(!1),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),E("Failed to fetch goods"),p(!1);case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();e()}),[N]);var D=function(){window.innerHeight+document.documentElement.scrollTop>=document.documentElement.offsetHeight-50&&S&&!d&&k((function(e){return e+1}))};if((0,s.useEffect)((function(){return window.addEventListener("scroll",D),function(){return window.removeEventListener("scroll",D)}}),[d,S]),d&&1===N)return s.createElement("p",null,"Loading...");if(v)return s.createElement("p",null,v);var L=n.length>0?new Date(n[0].created_at).getMonth():null,b=n.length>0?new Date(n[0].created_at).getFullYear():null;return s.createElement("div",{className:"ipod-container"},s.createElement("div",{className:"ipod-header"},s.createElement("div",{className:"everyday-title"},s.createElement("h1",null,"Goods"))),s.createElement("div",{className:"ipod-items"},n.map((function(e){return s.createElement("a",{key:e.id,href:e.item_link,className:"ipod-item-link"},s.createElement("div",{className:"ipod-item"},s.createElement("div",{className:"goodImagin"},s.createElement("img",{src:e.image_url,alt:e.message,className:"ipod-item-image"})),s.createElement("div",{className:"ipod-item-content"},s.createElement("h3",null,e.title),new Date(e.created_at).getMonth()===L&&new Date(e.created_at).getFullYear()===b&&s.createElement("span",{className:"ipod-new-tag"},"New"))))}))),d&&s.createElement("p",null,"Loading more..."))}}}]);
//# sourceMappingURL=bundle.148be80c0d2779983233.js.map